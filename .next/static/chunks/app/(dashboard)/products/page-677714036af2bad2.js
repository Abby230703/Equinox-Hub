(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[739],{63:(e,t,s)=>{"use strict";var r=s(7260);s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},368:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(1847).A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},1786:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(1847).A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},2056:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(1847).A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},2529:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(1847).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},6617:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(1847).A)("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},6648:(e,t,s)=>{"use strict";s.d(t,{U:()=>a});var r=s(5417);function a(){return(0,r.createBrowserClient)("https://oryknnnuwqabbvohybjd.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9yeWtubm51d3FhYmJ2b2h5YmpkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA2MjMyMDUsImV4cCI6MjA4NjE5OTIwNX0.LrW7-z1_gu1SPtfUTlZs__W8T6aEm4sE1P6Q2353mnk")}},6980:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>b});var r=s(5155),a=s(2115),d=s(63),n=s(2619),c=s.n(n),i=s(5069),l=s(5177),o=s(5899),u=s(6648),m=s(4269),x=s(1786),p=s(2529),h=s(6651),f=s(6617),g=s(2056),j=s(368),N=s(7937);function b(){let{divisionCode:e}=(0,i.N)(),t=(0,d.useSearchParams)(),s=(0,u.U)(),[n,b]=(0,a.useState)([]),[v,k]=(0,a.useState)([]),[y,w]=(0,a.useState)(0),[A,_]=(0,a.useState)(!0),[S,C]=(0,a.useState)(""),[P,I]=(0,a.useState)(null),[M,z]=(0,a.useState)(null),[E,U]=(0,a.useState)(1),[q,O]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if("success"===t.get("import")){O(!0);let e=setTimeout(()=>O(!1),5e3);return()=>clearTimeout(e)}},[t]),(0,a.useEffect)(()=>{!async function(){_(!0);let{data:t}=await s.from("divisions").select("id").eq("code",e).single();if(!t)return _(!1);let{data:r}=await s.from("categories").select("*").eq("division_id",t.id).order("name");r&&k(r);let a=s.from("products").select("*",{count:"exact"}).eq("division_id",t.id).eq("is_active",!0).order("created_at",{ascending:!1});P&&(a=a.eq("category_id",P)),M&&(a=a.eq("product_class",M)),S.trim()&&(a=a.or("name.ilike.%".concat(S,"%,sku.ilike.%").concat(S,"%,barcode.ilike.%").concat(S,"%")));let d=(E-1)*25;a=a.range(d,d+25-1);let{data:n,count:c}=await a;n&&b(n),null!==c&&w(c),_(!1)}()},[e,P,M,S,E,s]),(0,a.useEffect)(()=>{U(1)},[P,M,S]);let T=Math.ceil(y/25),J={APT:{accent:"text-apt-500",bg:"bg-apt-500/10",badge:"bg-apt-500"},HOSPI:{accent:"text-hospi-500",bg:"bg-hospi-500/10",badge:"bg-hospi-500"}}[e];return(0,r.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,r.jsx)(l.Y,{title:"Products",action:{label:"Import Products",href:"/products/import",icon:(0,r.jsx)(x.A,{className:"w-4 h-4"})}}),(0,r.jsxs)("div",{className:"p-6",children:[q&&(0,r.jsxs)("div",{className:"mb-6 p-4 bg-emerald-500/10 border border-emerald-500/30 rounded-lg flex items-center gap-3 animate-fade-in",children:[(0,r.jsx)(p.A,{className:"w-5 h-5 text-emerald-500"}),(0,r.jsx)("p",{className:"text-emerald-500 font-medium",children:"Products imported successfully!"})]}),(0,r.jsx)(l.z,{title:"Products",description:"Manage your product catalog",action:{label:"Import Products",href:"/products/import",icon:(0,r.jsx)(x.A,{className:"w-4 h-4"})}}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 mb-6",children:[(0,r.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,r.jsx)(h.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,r.jsx)("input",{type:"text",placeholder:"Search by name, SKU, or barcode...",value:S,onChange:e=>C(e.target.value),className:"w-full pl-10 pr-4 py-2 bg-card border border-border rounded-lg text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("select",{value:P||"",onChange:e=>I(e.target.value||null),className:"px-3 py-2 bg-card border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-ring appearance-none text-sm",children:[(0,r.jsx)("option",{value:"",children:"All Categories"}),v.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,r.jsxs)("select",{value:M||"",onChange:e=>z(e.target.value||null),className:"px-3 py-2 bg-card border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-ring appearance-none text-sm",children:[(0,r.jsx)("option",{value:"",children:"All Classes"}),(0,r.jsx)("option",{value:"standard",children:"Standard"}),(0,r.jsx)("option",{value:"custom_print",children:"Custom Print"}),(0,r.jsx)("option",{value:"made_to_order",children:"Made to Order"})]})]}),(0,r.jsxs)("span",{className:"text-sm text-muted-foreground ml-auto",children:[y," products"]})]}),(0,r.jsx)(o.Zp,{children:(0,r.jsx)(o.Wu,{className:"p-0",children:A?(0,r.jsxs)("div",{className:"p-12 text-center",children:[(0,r.jsx)("div",{className:"inline-block w-8 h-8 border-4 border-muted border-t-foreground rounded-full animate-spin"}),(0,r.jsx)("p",{className:"mt-4 text-muted-foreground",children:"Loading products..."})]}):0===n.length?(0,r.jsxs)("div",{className:"p-12 text-center",children:[(0,r.jsx)(f.A,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No products found"}),(0,r.jsx)("p",{className:"text-muted-foreground mb-4",children:0===y?"Start by importing your price list":"No products match your filters"}),0===y&&(0,r.jsx)(c(),{href:"/products/import",children:(0,r.jsxs)(o.$n,{className:"gap-2",children:[(0,r.jsx)(x.A,{className:"w-4 h-4"})," Import Products"]})})]}):(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{className:"bg-zinc-900/50 border-b border-border",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"p-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"SKU"}),(0,r.jsx)("th",{className:"p-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Product Name"}),(0,r.jsx)("th",{className:"p-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Category"}),(0,r.jsx)("th",{className:"p-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Price"}),(0,r.jsx)("th",{className:"p-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Unit"}),(0,r.jsx)("th",{className:"p-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Class"}),(0,r.jsx)("th",{className:"p-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Stock"}),(0,r.jsx)("th",{className:"p-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"HSN / GST"}),(0,r.jsx)("th",{className:"p-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Status"})]})}),(0,r.jsx)("tbody",{children:n.map(e=>{let t=v.find(t=>t.id===e.category_id);return(0,r.jsxs)("tr",{className:"border-b border-border hover:bg-zinc-900/30 transition-colors",children:[(0,r.jsx)("td",{className:"p-3",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:(0,m.cn)("p-1.5 rounded",J.bg),children:(0,r.jsx)(f.A,{className:(0,m.cn)("w-4 h-4",J.accent)})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-mono text-sm text-zinc-300",children:e.sku}),e.is_auto_sku&&(0,r.jsxs)("div",{className:"flex items-center gap-1 mt-0.5",children:[(0,r.jsx)(g.A,{className:"w-3 h-3 text-amber-500"}),(0,r.jsx)("span",{className:"text-[10px] text-amber-500",children:"Auto SKU - needs barcode"})]})]})]})}),(0,r.jsx)("td",{className:"p-3",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-foreground max-w-xs truncate",children:e.name}),e.specifications&&(0,r.jsx)("p",{className:"text-xs text-muted-foreground mt-0.5",children:e.specifications})]})}),(0,r.jsx)("td",{className:"p-3",children:(0,r.jsx)(o.Ex,{variant:"secondary",size:"sm",children:(null==t?void 0:t.name)||"Uncategorized"})}),(0,r.jsx)("td",{className:"p-3 font-medium text-foreground",children:(0,m.vv)(Number(e.selling_price)||0)}),(0,r.jsx)("td",{className:"p-3 text-sm text-muted-foreground",children:e.unit}),(0,r.jsx)("td",{className:"p-3",children:(0,r.jsx)(o.Ex,{variant:"standard"===e.product_class?"secondary":"custom_print"===e.product_class?"info":"warning",size:"sm",children:"standard"===e.product_class?"Standard":"custom_print"===e.product_class?"Custom Print":"Made to Order"})}),(0,r.jsx)("td",{className:"p-3 text-sm text-muted-foreground",children:"stocked"===e.stock_type?"Stocked":"MTO"}),(0,r.jsxs)("td",{className:"p-3 text-sm text-muted-foreground",children:[e.hsn_code||"â€”"," / ",e.gst_percent||18,"%"]}),(0,r.jsx)("td",{className:"p-3",children:(0,r.jsx)(o.Ex,{variant:e.is_active?"success":"secondary",children:e.is_active?"Active":"Inactive"})})]},e.id)})})]})})})}),T>1&&(0,r.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Showing ",(E-1)*25+1,"â€“",Math.min(25*E,y)," of ",y]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(o.$n,{variant:"outline",size:"sm",disabled:1===E,onClick:()=>U(e=>Math.max(1,e-1)),children:(0,r.jsx)(j.A,{className:"w-4 h-4"})}),Array.from({length:Math.min(T,5)},(e,t)=>{let s;return s=T<=5||E<=3?t+1:E>=T-2?T-4+t:E-2+t,(0,r.jsx)(o.$n,{variant:s===E?"primary":"outline",size:"sm",onClick:()=>U(s),children:s},s)}),(0,r.jsx)(o.$n,{variant:"outline",size:"sm",disabled:E===T,onClick:()=>U(e=>Math.min(T,e+1)),children:(0,r.jsx)(N.A,{className:"w-4 h-4"})})]})]})]})]})}},7629:(e,t,s)=>{Promise.resolve().then(s.bind(s,6980))},7937:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(1847).A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])}},e=>{e.O(0,[453,819,755,441,255,358],()=>e(e.s=7629)),_N_E=e.O()}]);