(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[724],{17:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(1847).A)("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},1169:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(1847).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},2412:(e,s,t)=>{Promise.resolve().then(t.bind(t,5841))},5841:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>b});var r=t(5155),a=t(2115),c=t(5069),n=t(5177),i=t(5899),l=t(6648),d=t(4269),o=t(6191),m=t(6651),u=t(1169),h=t(17),x=t(9141),p=t(1847);let g=(0,p.A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),j=(0,p.A)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);function b(){let{divisionCode:e}=(0,c.N)(),s=(0,l.U)(),[t,p]=(0,a.useState)([]),[b,f]=(0,a.useState)(!0),[N,y]=(0,a.useState)("");(0,a.useEffect)(()=>{!async function(){f(!0);let{data:t}=await s.from("divisions").select("id").eq("code",e).single();if(!t)return f(!1);let{data:r}=await s.from("customers").select("*").eq("division_id",t.id).order("company_name");r&&p(r),f(!1)}()},[e,s]);let v=t.filter(e=>e.company_name.toLowerCase().includes(N.toLowerCase())||e.contact_person&&e.contact_person.toLowerCase().includes(N.toLowerCase())||e.phone.includes(N)),k={APT:{accent:"text-apt-500",bg:"bg-apt-500/10"},HOSPI:{accent:"text-hospi-500",bg:"bg-hospi-500/10"}}[e];return(0,r.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,r.jsx)(n.Y,{title:"Customers"}),(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)(n.z,{title:"Customers",description:"Manage your customer database",action:{label:"Add Customer",onClick:()=>{},icon:(0,r.jsx)(o.A,{className:"w-4 h-4"})}}),(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsxs)("div",{className:"relative max-w-md",children:[(0,r.jsx)(m.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,r.jsx)("input",{type:"text",placeholder:"Search customers...",value:N,onChange:e=>y(e.target.value),className:"w-full pl-10 pr-4 py-2 bg-card border border-border rounded-lg text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring"})]})}),b?(0,r.jsxs)("div",{className:"p-12 text-center",children:[(0,r.jsx)("div",{className:"inline-block w-8 h-8 border-4 border-muted border-t-foreground rounded-full animate-spin"}),(0,r.jsx)("p",{className:"mt-4 text-muted-foreground",children:"Loading customers..."})]}):0===v.length?(0,r.jsx)(i.Zp,{children:(0,r.jsxs)(i.Wu,{className:"p-12 text-center",children:[(0,r.jsx)(u.A,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No customers found"}),(0,r.jsx)("p",{className:"text-muted-foreground mb-4",children:0===t.length?"Add your first customer to get started":"No customers match your search"}),(0,r.jsxs)(i.$n,{className:"gap-2",children:[(0,r.jsx)(o.A,{className:"w-4 h-4"}),"Add Customer"]})]})}):(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:v.map(e=>(0,r.jsx)(i.Zp,{className:"hover:border-zinc-600 transition-colors",children:(0,r.jsxs)(i.Wu,{className:"p-4",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,r.jsx)("div",{className:(0,d.cn)("p-2 rounded-lg",k.bg),children:(0,r.jsx)(u.A,{className:(0,d.cn)("w-5 h-5",k.accent)})}),(0,r.jsx)(i.$n,{variant:"ghost",size:"sm",children:(0,r.jsx)(h.A,{className:"w-4 h-4"})})]}),(0,r.jsx)("h3",{className:"font-semibold text-foreground mb-1",children:e.company_name}),e.contact_person&&(0,r.jsx)("p",{className:"text-sm text-muted-foreground mb-3",children:e.contact_person}),(0,r.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,r.jsx)(x.A,{className:"w-4 h-4"}),(0,r.jsx)("span",{children:e.phone})]}),e.email&&(0,r.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,r.jsx)(g,{className:"w-4 h-4"}),(0,r.jsx)("span",{className:"truncate",children:e.email})]}),e.city&&(0,r.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,r.jsx)(j,{className:"w-4 h-4"}),(0,r.jsxs)("span",{children:[e.city,", ",e.state]})]})]}),e.gst_number&&(0,r.jsx)("div",{className:"mt-3 pt-3 border-t border-border",children:(0,r.jsxs)(i.Ex,{variant:"secondary",size:"sm",children:["GST: ",e.gst_number]})})]})},e.id))})]})]})}},6648:(e,s,t)=>{"use strict";t.d(s,{U:()=>a});var r=t(5417);function a(){return(0,r.createBrowserClient)("https://oryknnnuwqabbvohybjd.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9yeWtubm51d3FhYmJ2b2h5YmpkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA2MjMyMDUsImV4cCI6MjA4NjE5OTIwNX0.LrW7-z1_gu1SPtfUTlZs__W8T6aEm4sE1P6Q2353mnk")}},9141:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(1847).A)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])}},e=>{e.O(0,[453,819,755,441,255,358],()=>e(e.s=2412)),_N_E=e.O()}]);